"0","#############################"
"0","## Figure 12a"
"0","#############################"
"0","library(""sf"")"
"0","library(""rnaturalearth"")"
"0",""
"0","# functions to obtain crimes data"
"0","get_crimes_data <- function(path) {"
"0","  stopifnot(file.exists(path), (""crimes_in_Greater_London_2015-10.zip"" %in% list.files(path)))"
"0","  tmp_dir <- tempdir()"
"0","  unzip(file.path(path, ""crimes_in_Greater_London_2015-10.zip""), exdir = tmp_dir)"
"0","  rbind(read.csv(file.path(tmp_dir, ""2015-10-city-of-london-street.csv"")),"
"0","        read.csv(file.path(tmp_dir, ""2015-10-metropolitan-street.csv"")))"
"0","}"
"0",""
"0","# please download the file ""crimes_in_Greater_London_2015-10.zip""  "
"0","# (available on https://www.jstatsoft.org as a supplement of this paper),  "
"0","# and change the path argument below to the location of the downloaded file:"
"0","# crimes <- get_crimes_data(path = ""./"")"
"0","crimes <- rbind("
"0","  read.csv(""../data/crimes_in_Greater_London_2015-10/2015-10-city-of-london-street.csv""),"
"0","  read.csv(""../data/crimes_in_Greater_London_2015-10/2015-10-metropolitan-street.csv""))"
"0",""
"0","# create sf of known locations"
"0","crimes <- crimes[!is.na(crimes$Longitude) & !is.na(crimes$Latitude), ]"
"0","crimes <- st_as_sf(crimes, coords = c(""Longitude"", ""Latitude""), crs = 4326)"
"0",""
"0","# set map projection to British National Grid"
"0","crimes <- st_transform(crimes, crs = 27700)"
"0",""
"0","c1 <- qtm(crimes)"
"0","c1"
